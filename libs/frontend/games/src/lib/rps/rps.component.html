<div class="game-container">
  <div class="header-row">
    <button class="back-button" (click)="disconnect()">Terug</button>
    <div class="header-center">
      <h1>Steen papier schaar</h1>
    </div>
    <div class="score-container">
      <div class="score-pair user-score-pair">
        <div class="score-label">Eigen Score:</div>
        <div class="score-value">{{ score }}</div>
      </div>
      <div class="score-pair opponent-score-pair">
        <div class="score-label">Tegenstander Score:</div>
        <div class="score-value">{{ opponentScore }}</div>
      </div>
    </div>
  </div>

  <div class="choices-row">
    <div class="choice-section own-choice">
      <img *ngIf="winner" class="crown" src="rps/kroon.png" alt="Crown" />
      <h2>Uw keuze</h2>
      <div class="choice-box" [@slideIn]="userChoiceState">
        <img *ngIf="choice" [src]="getImageUrl(choice)" [alt]="choice" />
      </div>
    </div>

    <div class="timer-between">
      <ng-container *ngIf="timerTime === 6; else timerOrOther">
      Maak uw keuze
      </ng-container>

      <ng-template #timerOrOther>
      <ng-container *ngIf="timerTime <= 5 && timerTime >= 0; else afterTimer">
        {{ timerTime }} sec
      </ng-container>

      <ng-template #afterTimer>
        <ng-container *ngIf="winner; else loserOrDraw">
        Gewonnen
        </ng-container>
        <ng-template #loserOrDraw>
        <ng-container *ngIf="looser; else draw">
          Verloren
        </ng-container>
        </ng-template>
        <ng-template #draw>
        <ng-container *ngIf="draw">
          Gelijk
        </ng-container>
        </ng-template>
      </ng-template>
      </ng-template>
    </div>

    <!-- Opponent choice -->
    <div class="choice-section opponent-choice">
      <img *ngIf="looser" class="crown" src="rps/kroon.png" alt="Crown" />
      <h2>Keuze tegenstander</h2>
      <div class="choice-box" [@slideInOpponent]="opponentChoiceState">
        <img
          *ngIf="opponentChoice"
          [src]="getImageUrl(opponentChoice)"
          [alt]="opponentChoice"
        />
      </div>
    </div>
  </div>

  <div class="score-row">
    <div class="score-box" (click)="changeChoice(RPSChoicesEnum.Steen)">
      <img src="rps/steen.png" alt="Steen" />
    </div>
    <div class="score-box" (click)="changeChoice(RPSChoicesEnum.Papier)">
      <img src="rps/papier.png" alt="Papier" />
    </div>
    <div class="score-box" (click)="changeChoice(RPSChoicesEnum.Schaar)">
      <img src="rps/schaar.png" alt="Schaar" />
    </div>
  </div>
</div>

<div class="overlay" *ngIf="isGameOver">
  <div class="popup">
    <h2>Game Over</h2>
    <p>Bedankt voor het spelen!</p>
    <p>Eindstand: {{ score }} - {{ opponentScore }}</p>
    <button (click)="leaveGame()">Naar Dashboard</button>
  </div>
</div>
